<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>deepMerge</title>
</head>
<body>
<h1>deep merge test</h1>
<p>view in console.</p>
<!--Legacy-->
<script src="./deep-merge-bundle.iife.js"></script>
<script>
  // clone test
  let x = {a: {b: {c: {x: 1}}}}, x1 = {a: {b: {c: {x: 2}}}}
  let a = x.a, b = a.b, c = b.c, d = c.x
  let x2 = deepMerge(x, x1, {clone: -2}), x3
  console.log('iife:', x2 === x, x2.a === a, x2.a.b === b, x2.a.b.c === c, x2.a.b.c.x)
  //
  x = {a: {b: {c: {x: 10}}}}, x1 = {a: {b: {c: {x: 30}}}}
  a = x.a, b = a.b, c = b.c, d = c.x
  x3 = deepMerge(x, x1, {clone: 2})
  console.log('iife:', x3 === x, x3.a === a, x3.a.b === b, x3.a.b.c === c, x3.a.b.c.x)

  console.log('iife:', deepMerge.batch([null, {a: 1}, {b: 2}, {c: 3}]))
</script>

<!--ESM-->
<script type="module">
  import deepMerge from "./deep-merge-bundle.es.js";
  // clone test
  let x = {a: {b: {c: {x: 1}}}}, x1 = {a: {b: {c: {x: 2}}}}
  let a = x.a, b = a.b, c = b.c, d = c.x
  let x2 = deepMerge(x, x1, {clone: -2}), x3
  console.log('esm:', x2 === x, x2.a === a, x2.a.b === b, x2.a.b.c === c, x2.a.b.c.x)
  //
  x = {a: {b: {c: {x: 10}}}}, x1 = {a: {b: {c: {x: 30}}}}
  a = x.a, b = a.b, c = b.c, d = c.x
  x3 = deepMerge(x, x1, {clone: 2})
  console.log('esm:', x3 === x, x3.a === a, x3.a.b === b, x3.a.b.c === c, x3.a.b.c.x)

  console.log('esm:', deepMerge.batch([null, {a: 1}, {b: 2}, {c: 3}]))
</script>
</body>
</html>
